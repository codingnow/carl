<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="详细介绍 Xendesktop Studio 配置使用，如何用 Xendesktop 来搭建虚拟桌面。 以及搭建 Xendesktop 最常见的问题 “未注册” 的解决办法" />
    <meta name="author" content="唐久军">
    
    <link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="/assets/css/blog.css">
    <script type="text/javascript" src="/assets/js/blog.js"></script>

    <title>Xendesktop 的详细配置</title>

    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-39325120-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>

  </head>

  <body>
<div class="nav nav-fix-top">
    <div class="navbar-panel">
        <div class="brand">
            <a href="/" class="light">唐久军的博客</a>
        </div>

        <div class="catalog pull-right">
            <ul>
                <li><a href="/categories.html">分类</a></li>
                <li><a href="/tags.html">标签</a></li>
                <li><a href="/projects.html">项目</a></li>
                <li><a href="/archives.html">归档</a></li>
                <li><a href="/about_me.html">关于我</a></li>
            </ul>
        </div>
    </div>
</div>

<!-- 防止 IE6、7 中定位元素导致相邻元素 margin-top 失效 -->
<div style="height: 0px"></div>
  <div class="well well-header">
      <ul>
          <li  class="badge badge-info badge-large pull-right">
            <a href="/categories.html?#anchor服务器">分类：服务器</a></li>
      </ul>
      <ul>
        
          <li  class="badge badge-inverse pull-right">
              <a href="/tags.html?#anchorXendesktop">Xendesktop</a>
          </li>
        
          <li  class="badge badge-inverse pull-right">
              <a href="/tags.html?#anchorWindows">Windows</a>
          </li>
        
      </ul>

      <a class="time-backgroud"></a>
      <span class="time-meta">2013年03月21日</span>
      <h1>Xendesktop 的详细配置</h1>
      <hr>
      <p>详细介绍 Xendesktop Studio 配置使用，如何用 Xendesktop 来搭建虚拟桌面。 以及搭建 Xendesktop 最常见的问题 “未注册” 的解决办法</p>
  </div>

  <div class="well">
    <h3>配置 Licence Server</h3>

<ol>
<li><p>如果你已经有许可证服务器或者还没有购买许可者，则此步可以省略。</p></li>
<li><p>配置步骤：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">在 安装 Xendesktop 的计算机上
打开 &quot;开始菜单&quot; -&gt; &quot;所有程序&quot; -&gt; &quot;Citrix&quot; -&gt; &quot;管理控制台&quot;  -&gt; &quot;许可证管理控制台&quot; -&gt; 
点击右上角 &quot;管理&quot;  -&gt; 
用域管理员（用户名：ad\admin）登录  -&gt; 
选择 &quot;供应商守护程序配置&quot; -&gt; 
选择 &quot;导入许可证&quot;，浏览本地许可证位置，点击 &quot;导入许可证&quot; -&gt; 
单击 &quot;确定&quot;，导入成功
然后依次重启 &quot;Citrix Licensing&quot;，&quot;Citrix Licensing Config Service&quot;，&quot;Citrix Licensing 支持服务&quot;
当我们再次打开 许可证控制台 就可以看到所有可用的许可证了
</code></pre></div></li>
</ol>

<h3>Desktop Studio初始配置</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">在 安装 Xendesktop 的计算机上
打开 &quot;开始菜单&quot; -&gt; &quot;所有程序&quot; -&gt; &quot;Citrix&quot; -&gt; &quot;Desktop Studio&quot; -&gt; 
选择 &quot;桌面部署&quot; -&gt; 
输入站点名称 &quot;TestXenDesktop&quot;，数据库配置选择 &quot;使用默认数据库&quot;，然后 &quot;下一步&quot; -&gt; 
提示找不到数据库，是否为你在服务器上创建数据库，选择 &quot;确定&quot; -&gt; 
在 许可证服务器中填入你的许可证服务器地址，默认 localhost:27000，然后选择许可证版本，然后 &quot;下一步&quot; -&gt; 
主机类型选择 &quot;Citrix XenServer&quot;，地址为 Xenserver 服务器地址，用户名，密码也为 Xenserver 服务器用户名和密码。输入连接名称 &quot;XenServer One&quot;，选择 &quot;使用 Xendesktop 创建虚拟机&quot;，然后 &quot;下一步&quot; -&gt; 
设置主机名和网卡（网卡为 Xenserver 上的网卡），然后 &quot;下一步&quot; -&gt; 
选择存储 &quot;为虚拟机和 Personal vDisk 使用相同的存储&quot;，然后 &quot;下一步&quot; -&gt; 
单击 &quot;完成&quot;。OK 了
</code></pre></div>
<h3>批量发布虚拟桌面</h3>

<ol>
<li><p>配置此步之前，确定已经制作好了模板镜像</p></li>
<li><p>虚拟桌面配置</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">打开 &quot;Desktop Studio&quot; -&gt; 点击 计算机创建中的 &quot;配置&quot; 按钮-&gt; 
在计算机类型中选择 &quot;池&quot;，计算机分配中选择 &quot;随机 - 在用户登录时为用户随机分配计算机&quot;，然后 &quot;下一步&quot; -&gt; 
选择主映像为模板镜像，然后 &quot;下一步&quot; -&gt; 
设置要创建虚拟机数，Active Directory 计算机账户选择 &quot;创建新账户&quot;，然后 &quot;下一步&quot; -&gt; 
选择计算机账户的 Active Directory 位置为 &quot;computers&quot;，设置账户命名方案（其中 `#` 为占位符，可表示 0-9 或者 a-z ），然后 &quot;下一步&quot; -&gt;  &quot;下一步&quot; -&gt; 
设置目录名称 &quot;Test Windows 7&quot;，然后 &quot;完成&quot;
</code></pre></div></li>
<li><p>创建用户组</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">打开 &quot;Desktop Studio&quot; -&gt; 右键单击 &quot;分配&quot;  -&gt; 选择 &quot;创建桌面组&quot; -&gt;
选择刚创建的目录 &quot;Test Windows 7&quot; 下面出现添加计算机，输入要分配的计算机台数，然后 &quot;下一步&quot; -&gt; 
选择可以使用这些计算机的用户和组，然后 &quot;下一步&quot; -&gt; &quot;下一步&quot; -&gt; 
最后设置显示名称（用户可见），桌面组名称（方便服务器辨别），然后 &quot;完成&quot;
</code></pre></div></li>
<li><p>未注册解决<br>
注意：Desktop Studio 会自动对桌面组进行电源管理。如果在虚拟机启动后出现 &quot;未注册&quot;，则按如下步骤检测：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">确定虚拟机的和 Xendesktop Studio 位于同一域中
确定虚拟机可以 ping 通 Xendesktop Studio 的 主机名.ad.test.com
确定虚拟机的防火墙以关闭
</code></pre></div></li>
<li><p>测试虚拟桌面</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">在其它可访问到 Xendesktop Studio 的客户机上：
打开 IE，或者 Firefox，然后输入 Xendesktop Studio 的 IP，
如果安装了 &quot;Citrix Receiver&quot;，则会出现登录界面，否则会提示安装。
登录成功后，会点亮图标，并会自动打开客户端。如果没有打开，可点击浏览器中图标
</code></pre></div></li>
</ol>

<h3>配置带个人盘的虚拟桌面</h3>

<ol>
<li><p>带个人盘（Personal vDisk）的好处是，在用户重启计算机后可以保存用户数据。</p></li>
<li><p>配置说明：</p>

<ul>
<li>在安装 Xendesktop Agent 是选择 &quot;是，启用 Personal vDisk&quot;，其它步骤和前一篇 制作模板镜像 中的步骤一样，安装后 &quot;更新 Personal vDisk&quot;，更新完后关机。</li>
<li>在 虚拟桌面配置 时，不选择 &quot;池&quot;，而是选择 &quot;通过 Personal vDisk 进行池化&quot;，其它步骤和前面批量发布虚拟桌面 2 中的一样一样。</li>
</ul></li>
</ol>

  </div>

  <!-- 底部导航条 -->
  <div class="nav nav-fix-bottom"  id="nav-fix-bottom">
      <div class="navbar-panel">
          <div id="page-nav-list" class="catalog pull-left"></div>
      </div>
  </div>

  <link rel="stylesheet" type="text/css" href="/assets/css/monokai.min.css">
  <script type="text/javascript" src="/assets/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

<!-- duoshuo div -->
<div class="well">
  <div class="ds-thread"></div>
</div>

<!-- Duoshuo Comment BEGIN -->
<script type="text/javascript">
  var duoshuoQuery = {short_name:"tang-blog"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- Duoshuo Comment END -->
<!-- Baidu Button BEGIN -->
<script type="text/javascript" id="bdshare_js" data="type=slide&amp;img=5&amp;mini=1&amp;pos=left&amp;uid=6635097" ></script>
<script type="text/javascript" id="bdshell_js"></script>
<script type="text/javascript">
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000);
</script>
<!-- Baidu Button END -->
    <div class="footer">
      &copy; 2013 唐久军 - Crafted with 
        <a href="http://jekyllrb.com/"><strong>Jekyll</strong></a>, Hosted on 
        <strong><a href="https://github.com/">GitHub</a></strong>
        | 转载请遵守 <a href="http://creativecommons.org/licenses/by-sa/3.0/cn/">CC BY-SA 3.0</a> 协议
        <span class="pull-right">
          <strong>
            <a href="https://github.com/tangjiujun">Fork me on GitHub </a>
          </strong>
        </span>
    </div>
  </body>
</html>
