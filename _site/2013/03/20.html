<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="在 Debian 上搭建基于 PPTP 的 VPN 服务器。可以在 Linux 或 Windows 上登陆上网。如果服务器是国外的还可以直接翻墙，这比什么其它代理强多了" />
    <meta name="author" content="唐久军">
    
    <link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="/assets/css/blog.css">
    <script type="text/javascript" src="/assets/js/blog.js"></script>

    <title>Linux 下 Pptp Vpn 服务器安装配置</title>

    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-39325120-3']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>

  </head>

  <body>
<div class="nav nav-fix-top">
    <div class="navbar-panel">
        <div class="brand">
            <a href="/" class="light">唐久军的博客</a>
        </div>

        <div class="catalog pull-right">
            <ul>
                <li><a href="/categories.html">分类</a></li>
                <li><a href="/tags.html">标签</a></li>
                <li><a href="/projects.html">项目</a></li>
                <li><a href="/archives.html">归档</a></li>
                <li><a href="/about_me.html">关于我</a></li>
            </ul>
        </div>
    </div>
</div>

<!-- 防止 IE6、7 中定位元素导致相邻元素 margin-top 失效 -->
<div style="height: 0px"></div>
  <div class="well well-header">
      <ul>
          <li  class="badge badge-info badge-large pull-right">
            <a href="/categories.html?#anchor服务器">分类：服务器</a></li>
      </ul>
      <ul>
        
          <li  class="badge badge-inverse pull-right">
              <a href="/tags.html?#anchorLinux">Linux</a>
          </li>
        
          <li  class="badge badge-inverse pull-right">
              <a href="/tags.html?#anchorvpn">vpn</a>
          </li>
        
      </ul>

      <a class="time-backgroud"></a>
      <span class="time-meta">2013年03月20日</span>
      <h1>Linux 下 Pptp Vpn 服务器安装配置</h1>
      <hr>
      <p>在 Debian 上搭建基于 PPTP 的 VPN 服务器。可以在 Linux 或 Windows 上登陆上网。如果服务器是国外的还可以直接翻墙，这比什么其它代理强多了</p>
  </div>

  <div class="well">
    <h3>服务器安装配置</h3>

<ol>
<li><p>安装 PPTP</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">aptitude install pptpd
</code></pre></div></li>
<li><p>配置 PPTP</p>

<ul>
<li><p>修改 <code>/etc/pptpd.conf</code></p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">localip 200.110.30.4        # localip 为你服务器的 ip
remoteip 192.168.100.234-238,192.168.100.245      # remoteip 为服务器分配给登陆 VPN 客户端的 ip 范围
</code></pre></div></li>
<li><p>修改 <code>/etc/ppp/pptpd-options</code>，修改为你自己的 DNS 服务器 或者就用本文中 Google DNS 服务器</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">ms-dns 8.8.8.8
ms-dns 4.4.4.4
</code></pre></div></li>
<li><p>修改 <code>/etc/ppp/chap-secrets</code>， 添加用户名和密码</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">&lt;username&gt;      pptpd   &lt;password&gt;        *
</code></pre></div></li>
<li><p>修改 <code>/etc/sysctl.conf</code>，才可以上网</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text"># Uncomment the next line to enable packet forwarding for IPv4
net.ipv4.ip_forward=1
</code></pre></div></li>
</ul></li>
<li><p>配置防火墙</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">iptables -t nat -A POSTROUTING -s 192.168.100.0/24 -o eth0 -j MASQUERADE
</code></pre></div></li>
<li><p>重启服务器，<code>reboot</code> 后就可以在客户端进行连接了</p></li>
</ol>

<h3>客户端安装配置</h3>

<p>由于客户端多种多样，因此我就不一一列举了，只是大体说明下</p>

<ol>
<li>Linux 客户端可以通过 pptp 命令链接，也可以使用 network-manager 连接</li>
<li>Windows 客户端可以打开网络共享中心 设置新的链接或网络 选择 连接到工作区 </li>
</ol>

  </div>

  <!-- 底部导航条 -->
  <div class="nav nav-fix-bottom"  id="nav-fix-bottom">
      <div class="navbar-panel">
          <div id="page-nav-list" class="catalog pull-left"></div>
      </div>
  </div>

  <link rel="stylesheet" type="text/css" href="/assets/css/monokai.min.css">
  <script type="text/javascript" src="/assets/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

<!-- duoshuo div -->
<div class="well">
  <div class="ds-thread"></div>
</div>

<!-- Duoshuo Comment BEGIN -->
<script type="text/javascript">
  var duoshuoQuery = {short_name:"tang-blog"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- Duoshuo Comment END -->
<!-- Baidu Button BEGIN -->
<script type="text/javascript" id="bdshare_js" data="type=slide&amp;img=5&amp;mini=1&amp;pos=left&amp;uid=6635097" ></script>
<script type="text/javascript" id="bdshell_js"></script>
<script type="text/javascript">
document.getElementById("bdshell_js").src = "http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=" + Math.ceil(new Date()/3600000);
</script>
<!-- Baidu Button END -->
    <div class="footer">
      &copy; 2013 唐久军 - Crafted with 
        <a href="http://jekyllrb.com/"><strong>Jekyll</strong></a>, Hosted on 
        <strong><a href="https://github.com/">GitHub</a></strong>
        | 转载请遵守 <a href="http://creativecommons.org/licenses/by-sa/3.0/cn/">CC BY-SA 3.0</a> 协议
        <span class="pull-right">
          <strong>
            <a href="https://github.com/tangjiujun">Fork me on GitHub </a>
          </strong>
        </span>
    </div>
  </body>
</html>
